<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task 21</title>
</head>
<body>

<script>
    // Считаем сколько раз можно вызвать функцию без переменных
    let i = 0;
    const func = () => {
        i++;
        func();
    };

    try {
        func();
    } catch (e) {
        // Словили ошибку переполнения стэка и вывели значение счетчика в консоль
        console.log(i);
    }


    // Считаем сколько раз можно вызвать функцию с 5 переменными
    let j = 0;

    const func2 = () => {
        let a = j + 1;
        let b = a + 1;
        let c = b + 1;
        let d = c + 1;
        let e = d + 1;
        j++;

        func2();
    };

    try {
        func2();
    } catch (e) {
        console.log(j);
    }

    // Размер функции определим как FuncSize = N + K * sizeOfVar, K - кол-во переменных
    // Размер стека это X = FuncSize * i (1)
    // Имеем два уравнения func = N (2) и func2 = N + 5 * 8 (одна переменная типа number в js это 8 байт)
    // т.к. коллстэк при рекурсивном вызове обоих функций был одинаковым можем получить:
    // N * i = N * j + 40 * j;
    // N = (40 * j)/(i - j);
    // Сам же коллстэк получаем по (1) меняя FuncSize на N согласно (2):
    console.log("Коллстэк: " + (40 * j) / Math.abs(i - j) * i + " байт");
    // Результаты в разных браузерах
    // Chrome  Коллстэк: 1004206.4003212206 байт
    // FireFox Коллстэк: 47599432.941176474 байт
    // Opera   Коллстэк: 1001584.0321931589 байт
    // Safari  Коллстэк: 12776360.007012624 байт

    // Считала по гайду отсюда https://habr.com/ru/articles/550534/
</script>
</body>
</html>